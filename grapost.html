<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Gra ze skrótami</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef;
      text-align: center;
      padding: 30px;
    }
    #start-screen, #game-container, #end-screen {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px #aaa;
      display: none;
    }
    input {
      padding: 8px;
      font-size: 16px;
      width: 250px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    .scoreboard {
      margin-top: 20px;
    }
    #feedback {
      margin-top: 10px;
      font-weight: bold;
    }
    #timer {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="start-screen">
    <h1>Witaj w grze!</h1>
    <p>
      Twoim zadaniem jest odpowiedzenie jakiej nazwie stacji odpowiada wylosowany skrót telegraficzny stacji<br>
      Za każdą poprawną odpowiedź zdobywasz punkt. Gra toczy się do pierwszej pomyłki.<br>
      Spróbuj pobić swój rekord!<br>
	  UWAGA! Gra objęta jest obszarem województwa śląskiego !z sieci PKP PLK!.<br>
	  Mogą być nieliczne braki. Stan na 07.2025! <br>
	  <a href="index.html"> POWRÓT </a>
    </p>
    <button onclick="startGame()">GRAJ</button>
  </div>

  <!-- Gra -->
  <div id="game-container">
    <h1>Rozszyfruj skrót</h1>
    <div id="shortcode" style="font-size: 32px; margin: 20px;">???</div>
    <input type="text" id="answer" placeholder="Wpisz rozwinięcie" />
    <br>
    <button onclick="checkAnswer()">Sprawdź</button>
    <div id="feedback"></div>
    <div class="scoreboard">
      <p>Punkty: <span id="score">0</span></p>
      <p>Rekord: <span id="highscore">0</span></p>
      <p id="timer">Czas: 00:00</p>
      <p id="best-time-live">Najlepszy czas: --:--</p>
    </div>
  </div>
  <div id="end-screen">
    <h1 id="end-title"></h1>
    <p id="end-message"></p>
    <p id="final-time"></p>
    <p id="best-time"></p>
    <button onclick="startGame()">Zagraj ponownie</button>
  </div>

  <script>
  const allShortcuts = {
      "Chi": ["Chałupki"],
	  "Bry": ["Brynów"],
      "Pi": ["Panewnik"],
	  "Cw": ["Czerwionka"],
      "CwD": ["Czerwionka Dębieńsko"],
      "Dn": ["Dębina"],
      "Jk": ["Jejkowice"],
      "KL": ["Katowice Ligota"],
	  "Km": ["Kamień"],
      "Kn": ["Knurów"],
	  "KO": ["Katowice Osobowa"],
      "KRa": ["Kuźnia Raciborska"],
      "Kzn": ["Krzyżanowice"],
      "Lsz": ["Leszczyny"],
      "ŁS": ["Łaziska Średnie"],
      "Mc": ["Mąkołowiec"],
      "MJ": ["Mikołów Jamna"],
      "Na": ["Nędza"],
      "NWs": ["Nędza Wieś"],
      "OJ": ["Orzesze Jaśkowice"],
      "Ol": ["Olza"],
      "Or": ["Orzesze"],
      "PŚ": ["Pawłowice Śląskie"],
      "R": ["Racibórz"],
	  "RaO": ["Radlin Obszary"],
      "Rb": ["Rybnik"],
      "RM": ["Racibórz Markowice"],
      "RN": ["Rybnik Niewiadom"],
	  "RT": ["Rybnik Towarowy"],
      "Ry": ["Rydułtowy"],
      "St": ["Strumień"],
      "Sta": ["Studzionka"],
      "Su": ["Sumina"],
      "Ty": ["Tychy"],
	  "Wa": ["Warszowice"],
      "WS": ["Wodzisław Śląski"],
      "Żo": ["Żory"],
      "Raw": ["Radoszowy"],
      "RKc": ["Ruda Kochłowice"],
      "Hj": ["Hajduki"],
	  "RWr": ["Ruda Wirek"],
	  "RBi": ["Ruda Bielszowice"],
      "ZM": ["Zabrze Makoszowy"],
      "ZMK": ["Zabrze Makoszowy Kopalnia"],
      "Miz": ["Mizerów"],
	  "Gie": ["Gierałtowice"],
      "MPn": ["Maciejów Północny"],
	  "GS": ["Gliwice Sośnica"],
      "Gl": ["Gliwice"],
	  "Szo": ["Szobiszowice"],
      "GP": ["Gliwice Port"],
	  "GŁ": ["Gliwice Łabędy"],
	  "Ta": ["Taciszów"],
      "RG": ["Rudziniec Gliwicki"],
      "Pk": ["Pyskowice"],
      "Pa": ["Paczyna"],
      "To": ["Toszek"],
      "TP": ["Toszek Północ"],
	  "Czr": ["Czarków"],
      "Dri": ["Droniowiczki"],
      "Lc": ["Lubliniec"],
      "Jw": ["Jawornica"],
	  "Pwk": ["Pawonków"],
      "Csa": ["Ciasna"],
	  "Srk": ["Sieraków Śląski"],
	  "Kos": ["Koszęcin"],
      "Rw": ["Rusinowice"],
      "Stb": ["Strzebiń"],
      "Bor": ["Boronów"],
      "Kwc": ["Kochanowice"],
	  "Lis": ["Lisów"],
	  "Lsw": ["Liswarta"],
	  "HN": ["Herby Nowe"],
      "HS": ["Herby Stare"],
      "Pn": ["Panki"],
      "Kp": ["Krzepice"],
      "Ja": ["Janinów"],
	  "Bln": ["Blachownia"],
	  "Gn": ["Częstochowa Gnaszyn"],
      "CS": ["Częstochowa Stradom"],
      "CO": ["Częstochowa Osobowa"],
      "CT": ["Częstochowa Towarowa"],
      "Wy": ["Wyczerpy"],
      "Rz": ["Rząsawa"],
	  "Ck": ["Cykarzew"],
      "Rd": ["Rudniki koło Częstochowy"],
      "Tk": ["Widzów Teklinów"],
      "Ku": ["Kucelinka"],
      "CMr": ["Częstochowa Mirów"],
      "Pr": ["Poraj"],
	  "Ms": ["Myszków"],
	  "Sw": ["Siewierz"],
	  "GW": ["Góra Włodowska"],
      "Ł": ["Łazy"],
	  "Pmi": ["Przymiarki"],
	  "DZ": ["Dąbrowa Górnicza Ząbkowice"],
      "DS": ["Dąbrowa Górnicza Strzemieszyce"],
      "DP": ["Dąbrowa Górnicza Południowa"],
	  "DGHK": ["Dąbrowa Górnicza Huta Katowice"],
      "DG": ["Dąbrowa Górnicza"],
	  "DW": ["Dąbrowa Górnicza Wschodnia"],
	  "DT": ["Dąbrowa Górnicza Towarowa"],
      "Sł": ["Sławków"],
	  "BŁ": ["Będzin Łagisza"],
      "DGP": ["Dąbrowa Górnicza Piekło"],
	  "Bn": ["Będzin"],
      "SG": ["Sosnowiec Główny"],
      "SPł": ["Sosnowiec Południowy"],
      "KSz": ["Katowice Szopienice Północne"],
	  "Sk": ["Stawiska"],
	  "Szb": ["Szabelnia"],
	  "Mw": ["Mysłowice"],
      "SDn": ["Sosnowiec Dańdówka"],
      "Ju": ["Juliusz"],
      "SKz": ["Sosnowiec Kazimierz"],
	  "Dra": ["Dorota"],
      "SMa": ["Sosnowiec Maczki"],
	  "Dł": ["Długoszyn"],
      "JS": ["Jaworzno Szczakowa"],
      "BG": ["Borowa Górka"],
      "MB": ["Mysłowice Brzezinka"],
      "MKs": ["Mysłowice Kosztowy"],
      "Im": ["Imielin"],
	  "CSl": ["Chełm Śląski"],
      "NB": ["Nowy Bieruń"],
      "CD": ["Czechowice Dziedzice"],
      "Psz": ["Pszczyna"],
      "ZC": ["Zabrzeg Czarnolesie"],
	  "Chy": ["Chybie"],
      "Pch": ["Pruchna"],
      "Zeb": ["Zebrzydowice"],
      "Kc": ["Kaczyce"],
      "CMl": ["Cieszyn Marklowice"],
      "Cn": ["Cieszyn"],
      "Ut": ["Ustroń"],
	  "WG": ["Wisła Głębce"],
      "UP": ["Ustroń Polana"],
	  "WU": ["Wisła Uzdrowisko"],
	  "Sko": ["Skoczów"],
      "Bi": ["Bieniowiec"],
      "CDd": ["Czechowice Dziedzice Południowe"],
	  "BKm": ["Bielsko Biała Komorowice"],
      "BB": ["Bielsko Biała Główna"],
	  "BBW": ["Bielsko Biała Wschód"],
	  "BLp": ["Bielsko Biała Lipnik"],
      "BBL": ["Bielsko Biała Leszczyny"],
      "WB": ["Wilkowice Bystra"],
	  "Że": ["Żywiec"],
      "Rj": ["Rajcza"],
      "Sl": ["Sól"],
	  "KKs": ["Katowice Kostuchna"],
      "KOc": ["Katowice Ochojec"],
	  "Ssc": ["Staszic"],
      "KT": ["Katowice Towarowa"],
	  "CB": ["Chorzów Batory"],
      "RC": ["Ruda Chebzie"],
      "Zz": ["Zabrze"],
      "SiS": ["Siemianowice Śląskie"],
	  "Bt": ["Bytom"],
      "BBk": ["Bytom Bobrek"],
      "ZB": ["Zabrze Biskupice"],
      "PSS": ["Piekary Śląskie Szarlej"],
	  "NS": ["Nakło Śląskie"],
	  "Klt": ["Kalety"],
      "Stb": ["Strzebiń"],
      "TG": ["Tarnowskie Góry"],
	  "Pc": ["Pieczyska", "Pierściec"],
      "Zw": ["Zawiercie", "Zwardoń"],
	  "Kł": ["Kłobuck", "Kłomnice"],
      "Br": ["Borowiany", "Bronów"],
	  "KM": ["Katowice Muchowiec", "Krupski Młyn"],
      "Mi": ["Mikołów", "Milówka", "Miedźno"],
      "Kz": ["Kozioł", "Kozy"],
	  "TMo": ["Tychy Miasto"],
	  "Ło": ["Łodygowice"],
	  "BSt": ["Bieruń Stary"],
	  "Ly": ["Lędziny"],
	  "GSc": ["Górki Ścierne"],
	  "T": ["Tworóg"]
  };

  let remainingShortcuts = {};
  let currentShortcut = '';
  let score = 0;
  let highscore = localStorage.getItem("highscore") || 0;
  let bestTime = localStorage.getItem("bestTime") || null;

  let gameEndedByWin = false;

  let startTime;
  let timerInterval;

  function formatTime(seconds) {
    const m = String(Math.floor(seconds / 60)).padStart(2, '0');
    const s = String(seconds % 60).padStart(2, '0');
    return `${m}:${s}`;
  }

  function startTimer() {
    startTime = Date.now();
    timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      document.getElementById("timer").textContent = "Czas: " + formatTime(elapsed);
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerInterval);
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    return elapsed;
  }

  function startGame() {
    document.getElementById("start-screen").style.display = "none";
    document.getElementById("end-screen").style.display = "none";
    document.getElementById("game-container").style.display = "inline-block";

    remainingShortcuts = { ...allShortcuts };
    score = 0;
    gameEndedByWin = false;

    document.getElementById("score").textContent = score;
    document.getElementById("highscore").textContent = highscore;
    document.getElementById("feedback").textContent = '';
    document.getElementById("timer").textContent = "Czas: 00:00";
    document.getElementById("best-time-live").textContent = bestTime
      ? "Najlepszy czas: " + formatTime(bestTime)
      : "Najlepszy czas: --:--";

    pickRandomShortcut();
    startTimer();
  }

  function pickRandomShortcut() {
    const keys = Object.keys(remainingShortcuts);
    if (keys.length === 0) {
      gameEndedByWin = true;
      endGame();
      return;
    }
    const randomIndex = Math.floor(Math.random() * keys.length);
    currentShortcut = keys[randomIndex];
    document.getElementById("shortcode").textContent = currentShortcut;
    document.getElementById("answer").value = '';
    document.getElementById("feedback").textContent = '';
  }

  function checkAnswer() {
    const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
    if (!userAnswer) {
      document.getElementById("feedback").textContent = "Wpisz odpowiedź!";
      return;
    }

    const correctAnswers = remainingShortcuts[currentShortcut].map(ans => ans.toLowerCase());
    if (correctAnswers.includes(userAnswer)) {
      score++;
      document.getElementById("score").textContent = score;
      if (score > highscore) {
        highscore = score;
        localStorage.setItem("highscore", highscore);
        document.getElementById("highscore").textContent = highscore;
      }
      delete remainingShortcuts[currentShortcut];
      pickRandomShortcut();
    } else {
      const correctList = remainingShortcuts[currentShortcut].join(" / ");
      document.getElementById("feedback").textContent =
        `Zła odpowiedź! Poprawnie: ${correctList}`;
      setTimeout(() => endGame(), 2000);
    }
  }

  function endGame() {
    const finalSeconds = stopTimer();
    document.getElementById("game-container").style.display = "none";
    document.getElementById("end-screen").style.display = "inline-block";
    document.getElementById("final-time").textContent = "Twój czas: " + formatTime(finalSeconds);

    if (gameEndedByWin) {
      document.getElementById("end-title").textContent = "✅ Gratulacje!";
      document.getElementById("end-message").textContent = "Odgadłeś wszystkie skróty!";

      if (!bestTime || finalSeconds < bestTime) {
        bestTime = finalSeconds;
        localStorage.setItem("bestTime", bestTime);
      }
      document.getElementById("best-time").textContent = "Najlepszy czas: " + formatTime(bestTime);
    } else {
      document.getElementById("end-title").textContent = "❌ Przegrałeś!";
      document.getElementById("end-message").textContent = "Spróbuj ponownie.";
      document.getElementById("best-time").textContent = bestTime
        ? "Najlepszy czas: " + formatTime(bestTime)
        : "";
    }
  }

  window.onload = () => {
    document.getElementById("start-screen").style.display = "inline-block";
    document.getElementById("answer").addEventListener("keypress", function (e) {
      if (e.key === "Enter") checkAnswer();
    });
	
	
  };
</script>


</body>
</html>